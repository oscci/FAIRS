---
title: "FAIRS report, Round 1"
author: "Dorothy V. M. Bishop"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  word_document: default
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(tidyverse)
require(viridis)
require(here)
require(janitor)
require(tidyr)
library(stringr)
require(flextable)

```

## Summary of FAIRS Survey, round 1

This is a preliminary document to provide feedback to moderators from Round 1 of the FAIRS survey.  For background to the survey, please see the protocol here: <https://osf.io/mzjsh/>.  

 

```{r setupdata, echo=F}
thisrow <- 0 #set to zero if no individualised data in report. Otherwise thisnumber specifies the row to be used in individualsed report

#NEED THE UNCODED CSV

#for testing: wanted file is just top file in list for nwo
myf<-list.files()  #all files in working directory
#this is myf[1] in test, but spell it out here
thisf <- "cm46vj4fd001i1020aww1cwpy-analytics-uncoded-12-01-2025-2.csv"

df <- read.csv(thisf)
myjisc <- read.csv('survey_template.csv')
mypanel <- read.csv('From_MS_Forms.csv')
signedup <- nrow(mypanel)

thispanel<-df[,2] #retain only those who completed the survey
w<-which(mypanel$anonid %in% thispanel)
mypanel<-mypanel[w,]
#NB mypanel will be in a different order, but we are only using mypanel to report demographics in table format, not for individuals, so this is OK

jisccodes <- seq(4,36,2) #X Codes in JISC file corresponding to items

#because of large N anaesthetists we coded them separately;

names(df)<-substring(names(df),1,12) #shorten df names to 12 chars
names(df)[2:3]<-c('ID','anaesth')
anaesths<-df[,3] #we will save the lists of anaesthetists but remove from file for now
df<-df[,-c(3,4)]  #also remove item that is just agreeing to take part.
df<-clean_names(df)
ncases <- nrow(df)
#df[1:ncases,1]<-NA

#rename col for group
w<-which(names(df)=="x38_we_anti")
names(df)[w]<-'group'
df$group<-as.factor(df$group)
levels(df$group)<-c('1_S','2_R','3_O')


df<-df[order(df$group),] #order by group - easier to follow when listing free text responses



```


```{r gatherfreetext, echo=F}
gatherfree <- function(mytext){
  mytext<-paste0(df$group,") ",mytext)
   f<-which(nchar(mytext)>7)
  mytext<-mytext[f]

   #str_replace_all(mytext, "[\r\n]" , ". ")

# knitr::kable(mytext,escape=FALSE)
  set_flextable_defaults(font.size = 9)
myft <- flextable(as.data.frame(mytext))
myft <- set_table_properties(myft,layout="autofit")
myft

}

```




`r signedup` panelists signed up to take part in the survey, and completed surveys were received from `r nrow(df)` of them.  Those taking part were asked to self-identify into one of three groups, and the distribution of respondents was as follows: 
  
- Sleuths, Whistleblowers, etc (Group S), N = `r length(which(df$group=='1_S'))`   
- Research Integrity Officers, etc (Group R), N = `r length(which(df$group=='2_R'))`   
- Others (Group O), N = `r length(which(df$group=='3_O'))`.  

```{r analysepanel,echo=F}
mypanel<-clean_names(mypanel)
gtab <- as.data.frame(table(mypanel$gender))
names(gtab)<-c('Gender','N')
ctab <- as.data.frame(table(mypanel$which_continent_are_you_based_in))
names(ctab)<-c('Continent','N')
rtab <- table(mypanel$reason_for_interest_in_taking_part)

emails<-mypanel$email_address
nUK <- length(grep(".uk",emails))
edoms <- str_split(emails,"@")
edoms <- unlist(edoms)
edoms <- edoms[seq(2,length(edoms),2)]

countrylist<-vector()
for (e in 1:length(edoms)){
g <- as.integer(regexpr("\\.[^\\.]*$", edoms[e])) #position of final 
ecountry <- substr(edoms[e],(g+1),nchar(edoms[e]))
countrylist<-c(countrylist,ecountry)
}
countrylist<-tolower(countrylist)

```

```{r makemeanstab, echo=F} 

makemeanstab <- function(myjisc,itemnum,df,thisrow){
  jisccodes <- seq(4,36,2) #X Codes in JISC file corresponding to items
    itemcode<-paste0('x',jisccodes[itemnum],'_')
    w<- grep(itemcode,names(df))
    if(length(w)>1) {w <- w[-1]}
    
    sumtab<-data.frame(matrix(NA, nrow=length(w),ncol=5))
    Ntab <- aggregate(df[,w[1]],by=list(df$group),FUN=length)
    names(sumtab)[2:4]<-levels(df$group)
    names(sumtab)[2:4]<-paste0(names(sumtab[2:4])," \n(N = ", Ntab$x,")")
    names(sumtab)[1]<-'Subitem'
    names(sumtab)[5]<-"Your response"
    
    for (v in 1:length(w)){ #step through all subitems; will make table with all together
    
     meantab<- aggregate(df[,w[v]],by=list(df$group),FUN=mean,na.rm=T)
     sdtab <- aggregate(df[,w[v]],by=list(df$group),FUN=sd,na.rm=T)
     

     sumtab[v,2]<-paste0(round(meantab$x[1],2)," (",round(sdtab$x[1],2),")")
     sumtab[v,3]<-paste0(round(meantab$x[2],2)," (",round(sdtab$x[2],2),")")
     sumtab[v,4]<-paste0(round(meantab$x[3],2)," (",round(sdtab$x[3],2),")")
     
     sumtab[v,1]<-paste0(LETTERS[v],") ",myjisc[itemnum,(7+v)])
     if(thisrow>0) {sumtab[v,5]<-df[thisrow,w[v]]}
 
    }
    if(thisrow==0){sumtab <- sumtab[,1:4]} 
    #Set thisrow to zero if you want means but not an individual response
  #knitr::kable(sumtab,row.names=FALSE,digits=2)
      # myft <- flextable(as.data.frame(sumtab))
      # myft <- set_table_properties(myft,layout="autofit")
      # myft
  myft <- flextable(as.data.frame(sumtab))
myft <- set_table_properties(myft,layout="autofit")
myft
}
```


```{r makecattab, echo=F} 
#tabular output for single option items
makecattab <- function(myjisc,itemnum,df,thisrow,myterms){
  jisccodes <- seq(4,36,2) #X Codes in JISC file corresponding to items
    itemcode<-paste0('x',jisccodes[itemnum],'_')
    w<- grep(itemcode,names(df))
    if(length(w)>1) {w <- w[-1]} #for these items, w should already be 1;
    
    #now recode items, using the myterms variable
    
    thist <-0
    for (t in 1:length(myterms)){
      x <- grep(myterms[t],df[,w]) #rows where this term matches
      df[x,w]<-t
      if(thisrow %in% x) {thist <-t}
    }
    
    
    rawtab <- table(df[,w],df$group)
    sumtab <-as.data.frame.matrix(100*prop.table(rawtab,2))
    sumtab <- round(sumtab,1)
    optnames <- unlist(as.vector(myjisc[itemnum,(7+(1:nrow(sumtab)))]))
    optnames <- paste0(LETTERS[1:nrow(sumtab)],") ",optnames)
    sumtab<-cbind(optnames,sumtab)
    sumtab[thist,1]<-paste(sumtab[thist,1],"*")
    
    
    
   
 # knitr::kable(sumtab,row.names=FALSE)
  
  myft <- flextable(as.data.frame(sumtab))
myft <- set_table_properties(myft,layout="autofit")
myft
}
```


The gender distribution was as follows:  
`r flextable(gtab)|> autofit()`    
The bulk of respondents were from Europe or N America:  
`r flextable(ctab) |> autofit()`    

<!--- And the distribution of email domains was as follows:  
`r knitr::kable(table(countrylist))`  --->

For items coded quantitatively, we show the mean and (SD) for each subgroup, where subgroup 1 = S(leuths), 2 = R(esearch Integrity Officers) and 3 = O(ther).  For simple multiple choice items, the table shows percentages in each group with a given response.

## Priorities  
### Item 1    
Which of these should be a primary focus for discussion? (1 for low priority, 3 for high priority). 
<!--Try to avoid selecting the same response for all options, so that we can identify their relative importance.   
- A. What constitutes serious research misconduct?			 
- B. How allegations of serious research misconduct are handled			
- C. Sanctions for serious research misconduct	-->		

`r makemeanstab(myjisc,1,df,thisrow)`

**Free text comments on item 1**  
`r mytext <- df$x5_1b_opt; gatherfree(mytext)`


## Burdens of serious research misconduct 
### Item 2       
How common is the problem of serious research misconduct? (select one).
Table shows percentages selecting each option in each group

<!-- - A. Serious research misconduct is rare relative to the amount of published research literature 
- B. Serious research misconduct is becoming more prevalent and starting to pose a threat to the research literature 
- C. Serious research misconduct is already common enough to pose a major threat to the research literature -->

`r makecattab(myjisc,2,df,thisrow,c("rare","prevalent","common"))`
  
**Free text comments on item 2**    

`r mytext <- df$x7_2b_opt; gatherfree(mytext)` 

### Item 3    
How harmful are the impacts of serious research misconduct to different segments of society? Please code as 1 (low harm) to 5 (strong harm)  


 `r makemeanstab(myjisc,3,df,thisrow)`

**Free text comments on item 3**    

`r mytext <- df$x9_2b_opt; gatherfree(mytext)` 

## Goals of those responding to serious research misconduct 
### Item 4    
In responding to serious research misconduct, several goals may be considered. 
Please rate how important each of these is, from 1 (unimportant) to 4 (very important) 

 `r makemeanstab(myjisc,4,df,thisrow)`
 
 **Free text comments on item 4**    

`r mytext <- df$x11_2b_opt; gatherfree(mytext)` 

## Factors hindering academic institutions' response to serious research misconduct 
### Item 5   
Various factors may hinder academic institutions' response to serious research 
misconduct. Please rate the following from 1 (not much of a hindrance) to 5 (substantial hindrance) 

`r makemeanstab(myjisc,5,df,thisrow)`

 **Free text comments on item 5**    

`r mytext <- df$x13_2b_opt; gatherfree(mytext)` 

## Factors driving serious research misconduct 
### Item 6   
What is the impact of these factors in encouraging researchers to commit serious research misconduct? 
Please rate from 1 (little impact) to 5 (large impact) 


`r makemeanstab(myjisc,6,df,thisrow)`

 **Free text comments on item 6**    

`r mytext <- df$x15_2b_opt; gatherfree(mytext)` 

## Role of social media   
### Item 7  
On balance, the role of social media in detecting and reporting serious research 
misconduct has been (select one).  
Table shows percentages selecting each option in each group.
<!-- - A. 	predominantly negative - it makes it too easy for vexatious individuals to raise unwarranted complaints, often under the guise of anonymity   
- B. neither positive nor negative on balance   
- C. positive - it provides a route for speedy commentary when concerns are discovered   -->

`r makecattab(myjisc,7,df,thisrow,c('predominantly','neither','speedy'))`

 **Free text comments on item 7**    

`r mytext <- df$x17_2b_opt; gatherfree(mytext)` 

## Reporting serious research misconduct   
### Item 8   
Official channels for reporting misconduct are often slow and obstructive (select one option).   
Table shows percentages selecting each option in each group.

`r makecattab(myjisc,8,df,thisrow,c('Strongly agree','Moderately agree','Neither agree nor disagree','Moderately disagree','Strongly disagree'))`

 **Free text comments on item 8**    

`r mytext <- df$x19_2b_opt; gatherfree(mytext)` 

## Models for addressing serious research misconduct 
### Item 9  
In an ideal world where resources are not an issue, which is the most suitable model/system for addressing serious research misconduct? 

<!-- - A. Self-regulation approach, where academic institutions are responsible for conducting investigations and 
determining sanctions when one of their staff is accused   
- B. National governance approach, where government regulatory agency is set up for this purpose   
- C. National guidelines approach; for example, UK's Committee for Research Integrity, which does not have a 
regulatory role, but aims to ensure all institutions work to a common framework   
- D. Regulatory agency independent of Government   
-->

`r makemeanstab(myjisc,9,df,thisrow)`

 **Free text comments on item 9**    

`r mytext <- df$x21_2b_opt; gatherfree(mytext)` 

## Role of employers
### Item 10  
Prospective employers should undertake rigorous due diligence and, as far as
possible, check with previous employers to ask if there have been any investigations into serious research misconduct.  
<!-- - A. Agree
- B. Neutral
- C. Disagree
-->
Table shows percentages selecting each option in each group.  

`r makecattab(myjisc,10,df,thisrow,c('Agree','Neutral','Disagree'))`

 **Free text comments on item 10**    

`r mytext <- df$x23_2b_opt; gatherfree(mytext)` 

### Item 11  
Employers, funders and publishers of research should be legally required to share information to support investigations of serious research misconduct.  
<!-- - A. Agree
- B. Neutral
- C. Disagree
-->
Table shows percentages selecting each option in each group.  
(For personalised report, * denotes the response you selected). 

`r makecattab(myjisc,11,df,thisrow,c('Agree','Neutral','Disagree'))`

 **Free text comments on item 11**    

`r mytext <- df$x25_2b_opt; gatherfree(mytext)` 

## Solutions to serious research misconduct
### Item 12  
Given that we have finite resources, which solutions to serious research misconduct should be prioritised in funding?
Rate the following options from 1 = most preferred, to 5 = least preferred 
<!--
- A. Changing criteria for hiring/promotion/funding away from publish/perish model, so that researchers won't be motivated to commit fraud  
- B. Research ethics training for all researchers  
- C. Funding/training of research integrity officers  
- D. Infrastructure to collect and report on serious research misconduct nationally  
- E. Support for individuals/organisations who have expertise in detection of serious research misconduct  
-->

`r makemeanstab(myjisc,12,df,thisrow)`

 **Free text comments on item 12**    

`r mytext <- df$x27_2b_opt; gatherfree(mytext)` 

## Role of publishers  
### Item 13 
It is not the responsibility of publishers or journal editors to determine whether serious research misconduct has occurred, but they are responsible for ensuring the literature is decontaminated from erroneous work promptly. Please rate the following statements in accordance with your views on how this should work, from 1 = strongly disagree to 5 = strongly agree. 

<!-- - A. Articles that contain serious errors that undermine confidence in the findings should be retracted promptly, without waiting for an institutional investigation  
- B. Publishers and institutions should work together to facilitate sharing of key information when serious research misconduct is suspected  
- C. If conditions for retraction are not met, an expression of concern may be added to an article while an institution conducts an investigation  
- D. When an institutional investigation is completed, the institution should directly approach the publisher of articles affected by severe research misconduct and request retraction  
- E. When a publisher finds the same author repeatedly flagged for erroneous material, they should communicate this to research integrity officer at the author's institution  
- F. When a publisher or institution finds the same researcher repeatedly flagged for erroneous material, their name should be added to a database. (NB. If there is sufficient endorsement of this statement, there would need to be discussion of how this works in terms of legal, practical and ethical aspects.)  
-->

`r makemeanstab(myjisc,13,df,thisrow)`

 **Free text comments on item 13**    

`r mytext <- df$x29_2b_opt; gatherfree(mytext)`

## Whistleblowers and bystanders  
### Item 14  
Please rate your agreement with the following statements about whistleblowers from 1 = strongly disagree to 5 = strongly agree  
<!-- 
- A. There are disincentives for researchers to report serious research misconduct					
- B. Usually there is insufficient protection for whistleblowers who report serious research misconduct					
- C. It is important to be aware of and mitigate collateral damage that may be caused to other members of a research group if one member is found to have committed serious research misconduct					
- D. Whistleblowers should have their identities protected, with confidential channels for reporting suspected serious research misconduct					
-->

`r makemeanstab(myjisc,14,df,thisrow)`

 **Free text comments on item 14**    

`r mytext <- df$x31_2b_opt; gatherfree(mytext)`

## When serious research misconduct is confirmed  
### Item 15  
Which of these practices should be options for institutions when serious research misconduct is confirmed.
Please give your rating from 1 = strongly disagree to 5 = strongly agree.*

<!--  
- A. Educational retraining for researchers who have been found to commit serious research misconduct  
- B. Restorative justice approaches; e.g. requirement to meet those affected by the misconduct to discuss its impact  
- C. Sanctions such as demotion or dismissal  
- D. Report on the investigation made public, with identities of those found to have committed serious research misconduct disclosed  
-->

`r makemeanstab(myjisc,15,df,thisrow)`

 **Free text comments on item 15**    

`r mytext <- df$x33_2b_opt; gatherfree(mytext)`

## Unintended consequences/barriers to progress  
### Item 16  
Please rate your agreement with the following statements about unintended consequences/barriers to progress from 1 = strongly disagree to 5 = strongly agree  
<!--
- A. Fear of reputational harm makes institutions less likely to take action on serious research misconduct
- B. Investigations of serious research misconduct divert researchers and associated resources from more productive research work
- C. There is a danger that structures developed to investigate serious research misconduct could be weaponised by those with political agendas - e.g. on topics such as vaccination, climate change, sexual health.
- D. Failure to address serious research misconduct at the institutional/employer level could lead to more bureaucracy from external agencies
-->

`r makemeanstab(myjisc,16,df,thisrow)`

 **Free text comments on item 16**    

`r mytext <- df$x35_2b_opt; gatherfree(mytext)`

### Item 17  
"One of the likely drivers of trust and distrust in research is the way research institutes, publishers, and funders respond to allegations of research misconduct" (Bouter, 2024)   

Table shows percentages selecting each option in each group.  

`r makecattab(myjisc,17,df,thisrow,c('Agree','Neutral','Disagree'))`

 **Free text comments on item 17**    

`r mytext <- df$x37_2b_opt; gatherfree(mytext)`

<!--## Free text comments


**Free text comments on item 1**  
`r mytext <- df$x5_1b_opt; gatherfree(mytext)`

**Free text comments on item 2**    

`r mytext <- df$x7_2b_opt; gatherfree(mytext)` 


**Free text comments on item 3**    

`r mytext <- df$x9_3b_opt; gatherfree(mytext)`  

  
**Free text comments on item 4**    

`r mytext <- df$x11_4b_op; gatherfree(mytext)`  
  
**Free text comments on item 5**    

`r mytext <- df$x13_5b_op; gatherfree(mytext)` 	 


**Free text comments on item 6**    

`r mytext <- df$x15_6b_op; gatherfree(mytext)`  


**Free text comments on item 7**    

`r mytext <- df$x17_7b_op; gatherfree(mytext)`  

**Free text comments on item 8**    

`r mytext <- df$x19_8b_op; gatherfree(mytext)`  

 
**Free text comments on item 9**   

`r mytext <- df$x21_9b_op; gatherfree(mytext)` 

**Free text comments on item 10**   

`r mytext <- df$x23_10b_o; gatherfree(mytext)` 


**Free text comments on item 11**   

`r mytext <- df$x25_11b_o; gatherfree(mytext)` 



**Free text comments on item 12**   

`r mytext <- df$x27_12b_o; gatherfree(mytext)`  

**Free text comments on item 13**   

`r mytext <- df$x29_13b_o; gatherfree(mytext)`  


**Free text comments on item 14** 
`r mytext <- df$x31_14b_o; gatherfree(mytext)`  


**Free text comments on item 15** 
`r mytext <- df$x33_15b_o; gatherfree(mytext)`

**Free text comments on item 16** 
`r mytext <- df$x35_16b_o; gatherfree(mytext)`  

**Free text comments on item 17** 
`r mytext <- df$x37_17b_o; gatherfree(mytext)`  
-->

## Final thoughts   
**Free text comments: final thoughts**  
`r mytext <- df$x39_any_oth; gatherfree(mytext)`  

Additional comment from sleuth: received by email:  
After I completed the FAIRS survey, it occurred to me that you might want to consider the fact that the international and collaborative nature of research and publishing are major obstacles to investigating research misconduct and punishing the guilty.  
  
In 2024, I had 5 publications containing data in three different journals. One journal has an editor in New Zealand but is published in Australia. Two journals are edited and published in the UK, but the publisher of one of those is German. On each publication, I had between one and five co-authors, resulting in me having 18 different co-authors from 13 institutions. Eight institutions are in UK, two in New Zealand and three in three different Australian states.  
  
Who would investigation possible misconduct in my publications and if individuals in different countries were involved, how would we make sure that sanctions are comparable?  
  

